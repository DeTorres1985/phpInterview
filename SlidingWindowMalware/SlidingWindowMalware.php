<?php

function simulate(array $entries) : array
{
    define("TEMPLATE_LENGTH", 8);
    define("LEFT_OFFSET", -3);
    define("RIGHT_OFFSET", 4);

    $newEntries = [];
    foreach ($entries as $k => $v) {
        $entryCandidate = $v;
        $leftOffset = $k + LEFT_OFFSET;
        $rightOffset = $k + RIGHT_OFFSET;
        if(isset($entries[$leftOffset]) && $entries[$leftOffset] >= $v){
            $entryCandidate = 0;
        }

        if(isset($entries[$rightOffset]) && $entries[$rightOffset] >= $v){
            $entryCandidate = 0;
        }
        $newEntries[] = $entryCandidate;
    }
    return $newEntries;
}

//$records = [1, 2, 0, 5, 0, 2, 4, 3, 3, 3];
$records = [10, 12, 3, 4, 61, 23, 1, 0, 9, 10];
//$records = [10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
echo implode(', ', simulate($records));
// Expected output
// 1, 0, 0, 5, 0, 0, 0, 3, 3, 0